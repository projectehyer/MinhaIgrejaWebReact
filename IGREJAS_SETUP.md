# Cadastro de Igrejas - Setup e Uso

## ğŸ“‹ VisÃ£o Geral

A funcionalidade de Cadastro de Igrejas permite gerenciar informaÃ§Ãµes de igrejas no sistema, incluindo dados de endereÃ§o completos.

## ğŸ—„ï¸ Estrutura da Tabela

A tabela `igrejas` no Supabase deve ter a seguinte estrutura:

```sql
create table public.igrejas (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  nome character varying null,
  logradouro character varying null,
  numero numeric null,
  complemento character varying null,
  bairro character varying null,
  id_cidade bigint null,
  id_uf bigint null,
  constraint igrejas_pkey primary key (id)
) TABLESPACE pg_default;
```

## ğŸ”§ ConfiguraÃ§Ã£o no Supabase

### 1. Criar a Tabela
Execute o SQL acima no SQL Editor do Supabase para criar a tabela.

### 2. Configurar PolÃ­ticas de SeguranÃ§a (RLS)
Adicione as seguintes polÃ­ticas para permitir acesso autenticado:

```sql
-- Habilitar RLS
ALTER TABLE public.igrejas ENABLE ROW LEVEL SECURITY;

-- PolÃ­tica para usuÃ¡rios autenticados
CREATE POLICY "UsuÃ¡rios autenticados podem gerenciar igrejas" ON public.igrejas
FOR ALL USING (auth.role() = 'authenticated');
```

## ğŸ¯ Como Usar

### Acessar a Funcionalidade
1. FaÃ§a login no sistema
2. No menu lateral, vÃ¡ em **AdministraÃ§Ã£o** â†’ **Igrejas**
3. VocÃª verÃ¡ o formulÃ¡rio de cadastro de igrejas

### Campos do FormulÃ¡rio
- **Nome da Igreja**: Nome completo da igreja
- **Logradouro**: Rua, avenida, etc.
- **NÃºmero**: NÃºmero do endereÃ§o
- **Complemento**: Apto, sala, etc. (opcional)
- **Bairro**: Bairro da igreja
- **Estado (UF)**: Selecione o estado
- **Cidade**: Nome da cidade

### Funcionalidades
- âœ… **Adicionar Nova Igreja**: Preencha o formulÃ¡rio e clique em "Adicionar Igreja"
- âœ… **Editar Igreja**: Clique em uma igreja da lista para editar
- âœ… **Lista de Igrejas**: Visualize todas as igrejas cadastradas
- âœ… **ValidaÃ§Ã£o**: Campos obrigatÃ³rios sÃ£o validados automaticamente

## ğŸ”„ IntegraÃ§Ã£o com o Sistema

### Endpoints Utilizados
- **GET** `/rest/v1/igrejas` - Buscar todas as igrejas
- **POST** `/rest/v1/igrejas` - Criar nova igreja
- **PATCH** `/rest/v1/igrejas?id=eq.{id}` - Atualizar igreja existente

### AutenticaÃ§Ã£o
Todas as requisiÃ§Ãµes incluem:
- `apikey`: Chave anon do Supabase
- `Authorization`: Token Bearer do usuÃ¡rio logado

## ğŸ¨ Interface

### Design Responsivo
- âœ… Funciona em desktop e mobile
- âœ… Layout adaptativo
- âœ… FormulÃ¡rio organizado em colunas

### Estilos
- Cores consistentes com o tema do sistema
- AnimaÃ§Ãµes suaves
- Feedback visual para interaÃ§Ãµes

## ğŸš€ PrÃ³ximos Passos

### Melhorias Sugeridas
1. **IntegraÃ§Ã£o com API de CEP**: Busca automÃ¡tica de endereÃ§o
2. **Upload de Imagem**: Foto da igreja
3. **GeolocalizaÃ§Ã£o**: Coordenadas GPS
4. **HorÃ¡rios de Culto**: Agenda de atividades
5. **Contatos**: Telefone, email, redes sociais

### Funcionalidades Futuras
- Mapa interativo com localizaÃ§Ã£o das igrejas
- RelatÃ³rios de igrejas por regiÃ£o
- IntegraÃ§Ã£o com Google Maps
- Sistema de avaliaÃ§Ãµes e comentÃ¡rios

## ğŸ› SoluÃ§Ã£o de Problemas

### Erro 401 (NÃ£o Autorizado)
- Verifique se estÃ¡ logado
- Confirme se as polÃ­ticas RLS estÃ£o configuradas

### Erro 422 (Dados InvÃ¡lidos)
- Verifique se todos os campos obrigatÃ³rios estÃ£o preenchidos
- Confirme o formato dos dados

### Erro de ConexÃ£o
- Verifique sua conexÃ£o com a internet
- Confirme se o Supabase estÃ¡ acessÃ­vel

## ğŸ“ Suporte

Para dÃºvidas ou problemas:
1. Verifique os logs do console do navegador
2. Confirme a configuraÃ§Ã£o do Supabase
3. Teste a conectividade com a API 